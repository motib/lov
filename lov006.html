<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<META name="GENERATOR" content="hevea 1.10">
<LINK rel="stylesheet" type="text/css" href="lov.css">
<TITLE>3&#XA0;&#XA0;Learning Objects for Arrays</TITLE>
</HEAD>
<BODY >
<A HREF="lov005.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A>
<A HREF="index.html"><IMG SRC="contents_motif.gif" ALT="Up"></A>
<A HREF="lov007.html"><IMG SRC="next_motif.gif" ALT="Next"></A>
<HR>
<H2 CLASS="section"><A NAME="htoc21">3</A>&#XA0;&#XA0;Learning Objects for Arrays</H2><P><A NAME="s.arrays"></A></P><P><B>Concept</B> An array is a sequence of elements of the same type;
the type of the elements can be a primitive types such as <TT>int</TT>,
or a predefined or user-defined class type. To access an element of an array, an index is given; this may be any expression of type 
<TT>int</TT>, including an integer literal or a variable.</P><DIV CLASS="center">
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=1><TR><TD ALIGN=center NOWRAP>LO</TD><TD ALIGN=left NOWRAP>Topic</TD><TD ALIGN=left NOWRAP>Java Files (.java)</TD><TD ALIGN=center NOWRAP>Prerequisites</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.01">3.1</A></TD><TD ALIGN=left NOWRAP>Array objects</TD><TD ALIGN=left NOWRAP>Array01A, B</TD><TD ALIGN=center NOWRAP>&nbsp;</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.02">3.2</A></TD><TD ALIGN=left NOWRAP>Array initializers</TD><TD ALIGN=left NOWRAP>Array02</TD><TD ALIGN=center NOWRAP>1</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.03">3.3</A></TD><TD ALIGN=left NOWRAP>Passing arrays as parameters</TD><TD ALIGN=left NOWRAP>Array03</TD><TD ALIGN=center NOWRAP>2</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.04">3.4</A></TD><TD ALIGN=left NOWRAP>Returning an array from a method</TD><TD ALIGN=left NOWRAP>Array04</TD><TD ALIGN=center NOWRAP>2</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.05">3.5</A></TD><TD ALIGN=left NOWRAP>Array assignment can create garbage</TD><TD ALIGN=left NOWRAP>Array05</TD><TD ALIGN=center NOWRAP>4</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.06">3.6</A></TD><TD ALIGN=left NOWRAP>Two-dimensional arrays</TD><TD ALIGN=left NOWRAP>Array06</TD><TD ALIGN=center NOWRAP>3</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.07">3.7</A></TD><TD ALIGN=left NOWRAP>Arrays of arrays</TD><TD ALIGN=left NOWRAP>Array07</TD><TD ALIGN=center NOWRAP>6</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.08">3.8</A></TD><TD ALIGN=left NOWRAP>Ragged arrays</TD><TD ALIGN=left NOWRAP>Array08</TD><TD ALIGN=center NOWRAP>6</TD></TR>
<TR><TD ALIGN=center NOWRAP><A HREF="#array.09">3.9</A></TD><TD ALIGN=left NOWRAP>Arrays of objects</TD><TD ALIGN=left NOWRAP>Array09</TD><TD ALIGN=center NOWRAP>3</TD></TR>
</TABLE>
</DIV><P>The example used in LO&#XA0;<A HREF="#array.01">3.1</A> through LO&#XA0;<A HREF="#array.01">3.1</A> is to fill an array 
with a sequence of fibonacci numbers (0,1,1,2,3,5,8). The programs for 
LO&#XA0;<A HREF="#array.05">3.5</A> through LO&#XA0;<A HREF="#array.08">3.8</A> concern matrices. 
The program for LO&#XA0;<A HREF="#array.09">3.9</A> is explained there.</P><H3 CLASS="subsection"><A NAME="htoc22">3.1</A>&#XA0;&#XA0;Array objects</H3><P><A NAME="array.01"></A></P><P><B>Concept</B> An array is created in three steps: first a variable of 
an array type is declared; then the array is allocated; finally, the 
elements of the array are given values. The syntax for accessing an array 
<TT>a</TT> is <TT>a[i]</TT>, and the field <TT>a.length</TT> gives the 
length of the array, so that if we modify the program by changing the size 
of the array the rest of the program need not change.</P><P><B>Program: Array01A.java</B>
, <A HREF="src/array/Array01A.java">click to display source</A>.<BR>

The program creates an array in the three steps described above.</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Initially, the variable <TT>fib</TT> of type integer array (denoted 
<TT>int[]</TT>) is allocated and contains the null value.
</LI><LI CLASS="li-itemize"><TT>new fib[7]</TT> creates an array object with its seven fields having the default 
integer value zero; then the reference to the object is returned and 
stored in the variable <TT>fib</TT>.
</LI><LI CLASS="li-itemize">The length field of the array is displayed above the cells for the elements.
</LI><LI CLASS="li-itemize">A <TT>for</TT> loop is used to assign values to each element of the 
array.
</LI><LI CLASS="li-itemize">The thin white lines show the constants and expressions that are used
as indices into the array.
</LI><LI CLASS="li-itemize"><EM>Automatic dereferencing</EM>: 
Although expressions like <TT>fib[i-2]</TT> seem to indicate that 
<TT>fib</TT> is being indexed, <TT>fib</TT> contains a reference to an array;
an implicit operation of dereferencing is carried out to obtain the
array itself from the reference and the index <TT>[i-2]</TT> is then
applied to that array.
</LI></UL><P><B>Concept</B> It is possible to combine the first two steps in creating an array: 
declaring the array field and allocating the array object.</P><P><B>Program: Array01B.java</B>
, <A HREF="src/array/Array01B.java">click to display source</A>.<BR>

This program combines the declaration of the
array field with its allocator. We have used the constant <TT>SIZE</TT> to 
specify the size of the array; this makes it easier to modify 
the program; nevertheless, <TT>fib.length</TT> is still used in the 
executable statements.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Initially, the static variable <TT>SIZE</TT> is created in the constant
area and given its value.
</LI><LI CLASS="li-itemize">The execution of the program is as before.
</LI></UL><P><B>Exercise</B> Modify the program so that the fibonacci sequence appears in
reverse order.

</P><H3 CLASS="subsection"><A NAME="htoc23">3.2</A>&#XA0;&#XA0;Array initializers</H3><P><A NAME="array.02"></A></P><P><B>Concept</B> An array object can be created implicitly by giving a list of values 
within braces.</P><P><B>Program: Array02.java</B>, <A HREF="src/array/Array02.java">click to display source</A>.<BR>

The program initializes an array with values of the fibonacci sequence.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Initially, the variable <TT>fib</TT> of type integer array (denoted <TT>int[]</TT>) is allocated. 
</LI><LI CLASS="li-itemize"><EM>As part of the same statement</EM>, the array object is created and 
its seven fields contain the values from the initializer.
</LI><LI CLASS="li-itemize">Only then is the reference to the object returned and stored in the variable <TT>fib</TT>.
</LI></UL><P><B>Exercise</B> Can an element of an array initializer be the value of
an expression containing variables previously declared? Modify this program
accordingly and try to compile and run it. Explain what happens.

</P><H3 CLASS="subsection"><A NAME="htoc24">3.3</A>&#XA0;&#XA0;Passing arrays as parameters</H3><P><A NAME="array.03"></A></P><P><B>Concept</B> An array is an object. Since the array variable itself 
contains a reference, it can be passed as an actual paramter to a method
and the reference is used to initialize the formal parameter.</P><P><B>Program: Array03.java</B>, <A HREF="src/array/Array03.java">click to display source</A>.<BR>

This program passes an array as a parameter to a method 
that reverses the elements of the array.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Initially, the variable <TT>fib</TT> of type integer array is 
allocated. As part of the same statement, the array object is created with 
its seven fields having the values in the initializer; the reference to 
the object is returned and stored in the variable <TT>fib</TT>.
</LI><LI CLASS="li-itemize">The array (that is, a <EM>reference</EM> to the array) is passed as a parameter to the method <TT>reverse</TT>. There are now two arrows pointing to the array: the reference from the <TT>main</TT> method and the reference from the parameter <TT>a</TT> of the method <TT>reverse</TT>.
</LI><LI CLASS="li-itemize">The method scans the first half of the array, exchanging each element with the corresponding one in the second half. Variables <TT>i</TT> and <TT>j</TT> contain the indices of the two elements that are exchanged.
</LI><LI CLASS="li-itemize">Upon return from the method, the variable <TT>fib</TT> still 
contains a reference to the array, which has had its sequence of values 
reversed.
</LI></UL><P><B>Exercise</B> Instead of declaring the variable <TT>j</TT> outside the for-loop,
declare it just inside the for-loop as follows:
</P><BLOCKQUOTE CLASS="quote">
<TT>int j = a.length-i-1;</TT>
</BLOCKQUOTE><P>
Trace the execution and explain what happens.

</P><H3 CLASS="subsection"><A NAME="htoc25">3.4</A>&#XA0;&#XA0;Returning an array from a method</H3><P><A NAME="array.04"></A></P><P><B>Concept</B> An array can be allocated within a method. Although the variable 
containing the reference to the array is local to the method, the array 
itself is global and the reference can be returned from the method.</P><P><B>Program: Array04.java</B>, <A HREF="src/array/Array04.java">click to display source</A>.<BR>

This program passes an array as a parameter to a method that reverses the elements of the array. The array is reversed into a new array <TT>b</TT> that is allocated in the method <TT>reverse</TT>. It is then returned to the main method and assigned to <TT>reversedFib</TT>, a different variable of the same array type <TT>int[]</TT>.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Initially, the variable <TT>fib</TT> of type integer array is 
allocated. As part of the same statement, the array object is created with 
its seven fields having the values in the initializer; the reference to 
the object is returned and stored in the variable <TT>fib</TT>.
</LI><LI CLASS="li-itemize">A reference to the array is passed as a parameter to the method 
<TT>reverse</TT>. The formal parameter <TT>a</TT> contains a reference to the same array pointeed to by the actual parameter <TT>fib</TT>.
</LI><LI CLASS="li-itemize">A new array <TT>b</TT> of the same type and length as the parameter <TT>a</TT> is declared and allocated.
</LI><LI CLASS="li-itemize">Each iteration of the for-loop moves one element from the first half of <TT>a</TT> to the second half of <TT>b</TT> and one element from the second half of <TT>a</TT> to the first half of <TT>b</TT>. Variables <TT>i</TT> and <TT>j</TT> contain the indices of the two elements that are moved.
</LI><LI CLASS="li-itemize">The reference to array <TT>b</TT> is returned.
Although array referenced by <TT>b</TT> was allocated <EM>within</EM> the method call, it still exists after returning. 
</LI><LI CLASS="li-itemize">The reference that is returned is assigned to <TT>reversedFib</TT>.
</LI></UL><P><B>Exercise</B> The program has a bug. Fix it!

</P><H3 CLASS="subsection"><A NAME="htoc26">3.5</A>&#XA0;&#XA0;Array assignment can create garbage</H3><P><A NAME="array.05"></A></P><P><B>Concept</B> Since an array variable contains a reference to the array itself, if 
<TT>null</TT> or another value (another array of the same type) is assigned to the 
variable, the first array may no longer be accessible. Inaccessible memory 
is called <EM>garbage</EM>. The Java runtime system includes a <EM>garbage 
collector</EM> whose task is to return garbage to the pool of memory that can 
be allocated.</P><P><B>Program: Array05.java</B>, <A HREF="src/array/Array05.java">click to display source</A>.<BR>

An array referenced by the variable <TT>fib</TT> is passed as a parameter to a method that moves the values of the elements in the first half of the array <TT>fib</TT> into a new array <TT>b</TT> which is allocated in the method. The new array is returned to the main method and assigned to the variable <TT>fib</TT>, destroying the reference to the original array.</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Initially, the variable <TT>fib</TT> of type integer array is allocated. As part of the same statement, the array object is created with its seven fields having the values in the initializer; the reference to the object is returned and stored in the variable <TT>fib</TT>.
</LI><LI CLASS="li-itemize">A reference to the array is passed as a parameter to the method <TT>first</TT>. The formal parameter <TT>a</TT> contains a reference to the same array pointed to by the actual parameter <TT>fib</TT>.
</LI><LI CLASS="li-itemize">A new array <TT>b</TT> of the same type as the parameter <TT>a</TT> but half the length is declared and allocated.
</LI><LI CLASS="li-itemize">Each iteration of the for-loop moves one element from the first half of <TT>a</TT> to the corresponding element in the array <TT>b</TT>.
</LI><LI CLASS="li-itemize">The reference to array <TT>b</TT> is returned. Although array referenced by <TT>b</TT> was allocated <EM>within</EM> the method call, it still exists after returning. 
</LI><LI CLASS="li-itemize">There are no references to the original array so it is inaccessible. <SPAN STYLE="font-variant:small-caps">Jeliot</SPAN> does not visualize garbage collection so the array remains visualized in the Instance and Array Area until the end of the program.
</LI></UL><P><B>Exercise</B> Modify the program so that the original array remains accessible
in a different field.

</P><H3 CLASS="subsection"><A NAME="htoc27">3.6</A>&#XA0;&#XA0;Two-dimensional arrays</H3><P><A NAME="array.06"></A></P><P><B>Concept</B> A matrix can be stored in a two-dimensional array. The syntax is 
<TT>int[][]</TT> with two indices, the first for rows and the second for 
columns. To access an element of the array, expressions for the two 
indices must be givien.</P><P><B>Program: Array06.java</B>, <A HREF="src/array/Array06.java">click to display source</A>.<BR>

This program creates a 2 &#XD7; 2 matrix and computes 
the sum of its elements.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
A two-dimensional array is allocated, the reference to it is 
assigned to the variable <TT>matrix</TT>.
The variable <TT>matrix</TT> contains one reference for each row,
and the rows are allocated as separate objects.
Note that <SPAN STYLE="font-variant:small-caps">Jeliot</SPAN> displays each row from top to bottom as it does for all objects!
</LI><LI CLASS="li-itemize">The elements of the array are initialized to (0,1,2,3) in a nested for-loop.
The outside loop iterates over the rows and the inner loop iterates over the
columns within an array.
</LI><LI CLASS="li-itemize"><TT>matrix.length</TT> is used to get the number of rows and 
<TT>matrix[i].length</TT> to get the number of columns in row <TT>i</TT>, which 
is the same for all rows in this program.
</LI><LI CLASS="li-itemize">The reference to the array is passed as a parameter to the method 
<TT>addElements</TT>, which adds the values of all the elements.
</LI><LI CLASS="li-itemize">The sum is returned from the method and assigned to the variable <TT>sum</TT>.
</LI></UL><P><B>Exercise</B> Modify the program perform the same computation on a 2 &#XD7; 3
matrix and on a 3 &#XD7; 2 matrix.</P><H3 CLASS="subsection"><A NAME="htoc28">3.7</A>&#XA0;&#XA0;Arrays of arrays</H3><P><A NAME="array.07"></A></P><P><B>Concept</B> A two-dimensional array is really an array of arrays; that is, each 
element of the array contains a reference to another array. Therefore, by
using only one index a one-dimensional array is obtained.</P><P><B>Program: Array07.java</B>
, <A HREF="src/array/Array07.java">click to display source</A>.<BR>

This program creates a 2 &#XD7; 2 matrix and then assigns the second row to a variable of type <EM>one-dimensional</EM> array.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
A two-dimensional array is allocated, the reference to it is assigned to the variable <TT>matrix</TT>.
The variable <TT>matrix</TT> contains one reference for each row and the rows are allocated as separate objects. Note that <SPAN STYLE="font-variant:small-caps">Jeliot</SPAN> displays rows from top to bottom as it does for all objects!
</LI><LI CLASS="li-itemize">The elements of the array are initialized to (0,1,2,3) in a nested for-loop.
The outside loop iterates over the rows and the inner loop iterates over the
columns within an array.
</LI><LI CLASS="li-itemize"><TT>matrix.length</TT> is used to get the number of rows and 
<TT>matrix[i].length</TT> to get the number of columns in row <TT>i</TT>, which 
is the same for all rows in this program.
</LI><LI CLASS="li-itemize">A variable <TT>vector</TT> of type one-dimensional array is declared and initialized
with the second row of the matrix, <TT>matrix[1]</TT>.
</LI></UL><P><B>Exercise</B> Write a program to rotate the rows of the array <TT>matrix</TT>. That is, row 0 becomes row 1 and row 1 becomes row 0. Now do this for an array of size 3 &#XD7; 3: row 0 becomes row 1, row 1 becomes row 2 and row 2 becomes row 0.

</P><H3 CLASS="subsection"><A NAME="htoc29">3.8</A>&#XA0;&#XA0;Ragged Arrays</H3><P><A NAME="array.08"></A></P><P><B>Concept</B> A two-dimensional array is really an array of arrays; that is, each element of the array contains a reference to another array. However, the two-dimensional array need not be a square matrix, and each row can have a different number of elements. By using only one index a one-dimensional array is obtained and these arrays need not all be of the same size.</P><P><B>Program: Array08.java</B>
, <A HREF="src/array/Array08.java">click to display source</A>.<BR>

Here we create the upper-left triangle of a 3 &#XD7; 3 matrix: row 0 of length 3, row 1 of length 2 and row 2 of length 1. Then we add the elements of the &#X201C;ragged&#X201D; array.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
The variable <TT>matrix</TT> is allocated, but since the size of the rows is not given, it is allocated as a one-dimensional array whose elements are references to one-dimensional arrays of integers. The default value for the elements is <TT>null</TT>.
</LI><LI CLASS="li-itemize">Three rows of different size are allocated with initializers and assigned to the elements of the array <TT>matrix</TT>.
</LI><LI CLASS="li-itemize">A reference to <TT>matrix</TT> is passed to the method <TT>addElements</TT> which adds the elements of the array and returns the value.
</LI><LI CLASS="li-itemize"><TT>matrix.length</TT> is used to get the number of rows and 
<TT>matrix[i].length</TT> to get the number of columns in row <TT>i</TT>; these
are different for each row.
</LI></UL><P><B>Exercise</B> Simplify the allocation of the array <TT>matrix</TT>. First, show how the variables <TT>row</TT> can be eliminated. Then find out how to write an initializer for a two-dimensional array so that the array can be initialized in one declaration. (Note: initializers for two-dimensional arrays are not supported in <SPAN STYLE="font-variant:small-caps">Jeliot</SPAN>.)

</P><H3 CLASS="subsection"><A NAME="htoc30">3.9</A>&#XA0;&#XA0;Arrays of objects</H3><P><A NAME="array.09"></A></P><P><B>Concept</B> Arrays can contain references to arbitrary objects. There is no difference between these arrays and arrays whose values are of primitive type, except that an individual element can be of any type.</P><P><B>Program: Array09.java</B> 
, <A HREF="src/array/Array09.java">click to display source</A>.<BR>

Objects of class <TT>Access</TT> contain name of a bank customer and the access level permitted for that customer. This program creates two objects, assigns the their references to elements of the <TT>Access</TT> and then swaps the elements of the array.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
The array <TT>accessess</TT> of type <TT>Access[]</TT> 
is allocated and contains null references.
</LI><LI CLASS="li-itemize">An object of type <TT>Access</TT> are allocated and initialized by its constructor; a reference to the object is stored in the first element of the array <TT>accessess</TT>.
</LI><LI CLASS="li-itemize">Similarly, another object is created and stored in the second element.
</LI><LI CLASS="li-itemize">The array <TT>accessess</TT> is passed to the method <TT>swap</TT> along with the 
indices 0 and 1.
</LI><LI CLASS="li-itemize">The two elements of the array are swapped. 
Note that after executing <TT>a[i] = a[j]</TT>, 
both elements of the array point to the second object (<TT>Alice,4</TT>), 
while a reference to the first object (<TT>Bob,3</TT>) is saved in the variable <TT>temp</TT>.
</LI></UL><P><B>Exercise</B> Modify the program so that the initialization of the array
<TT>accessess</TT> is done in one statement instead of three.</P><P><B>Exericse</B> Explain what happens if the method <TT>swap</TT> is replaced by: </P><P>&#XA0;&#XA0;&#XA0;<TT>static void swap(Access a, Access b) {</TT><BR>
&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<TT>Access temp = a;</TT><BR>
&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<TT>a = b;</TT><BR>
&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<TT>b = temp;</TT><BR>
&#XA0;&#XA0;&#XA0;<TT>}</TT></P><P>and the call by:</P><P>&#XA0;&#XA0;&#XA0;<TT>swap(accesses[0], accesses[1]);</TT>


</P><HR>
<A HREF="lov005.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A>
<A HREF="index.html"><IMG SRC="contents_motif.gif" ALT="Up"></A>
<A HREF="lov007.html"><IMG SRC="next_motif.gif" ALT="Next"></A>
</BODY>
</HTML>
